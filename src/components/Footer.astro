---
import CitySkyline from './ui/CitySkyline.astro';
import { getCollection } from 'astro:content';

const today = new Date();

// Author information from D005
const authorName = "Gwen DeMarco";
const tagline = "Paranormal romance with a focus on the weird and wonderful";

// Dynamically fetch featured series from CMS
const allSeries = await getCollection('series');
const featuredSeries = allSeries
	.filter(s => s.data.featured)
	.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<footer class="bg-shadow-black text-moon-silver py-16 border-t border-mystic-violet/20 relative overflow-hidden">
	<!-- Decorative city skyline -->
	<CitySkyline class="opacity-40" />
	<div class="container mx-auto px-4 relative z-10">
		<div class="max-w-6xl mx-auto">
			<!-- Main Footer Content -->
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
				<!-- Author Info -->
				<div class="sm:col-span-2">
					<h3 class="font-primary font-bold text-2xl text-ember-orange mb-4">
						{authorName}
					</h3>
					<p class="text-moon-silver/80 mb-6 max-w-md">
						{tagline}
					</p>
					<p class="text-fog-gray text-sm mb-6">
						Snarky heroines. Grumpy heroes. Found family.
					</p>
					<div class="flex space-x-4">
						<!-- Amazon Author Page -->
						<a href="https://www.amazon.com/stores/Gwen-DeMarco/author/B08CHLX2TB" target="_blank" rel="noopener noreferrer"
						   class="text-moon-silver/60 hover:text-ember-orange transition-colors p-2 -m-2 min-w-[44px] min-h-[44px] flex items-center justify-center"
						   aria-label="Amazon Author Page">
							<img src="/images/amazon-logo.svg" alt="Amazon" class="w-6 h-6 rounded-full" />
						</a>
						<!-- Goodreads -->
						<a href="https://www.goodreads.com/gwen_demarco" target="_blank" rel="noopener noreferrer"
						   class="text-moon-silver/60 hover:text-ember-orange transition-colors p-2 -m-2 min-w-[44px] min-h-[44px] flex items-center justify-center"
						   aria-label="Follow on Goodreads">
							<img src="/images/goodreads-logo.svg" alt="Goodreads" class="w-6 h-6 rounded-full" />
						</a>
						<!-- Email -->
						<a href="mailto:contact@gwendemarco.com"
						   class="text-moon-silver/60 hover:text-ember-orange transition-colors p-2 -m-2 min-w-[44px] min-h-[44px] flex items-center justify-center"
						   aria-label="Send Email">
							<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
								<path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.749L12 10.58l9.615-6.759h.749c.904 0 1.636.732 1.636 1.636z"/>
							</svg>
						</a>
					</div>
				</div>

				<!-- Quick Links -->
				<div>
					<h4 class="font-semibold text-bone-white mb-4">Quick Links</h4>
					<ul class="space-y-3">
						<li><a href="/books" class="text-moon-silver/60 hover:text-ember-orange transition-colors py-1 inline-block">Books</a></li>
						<li><a href="/series" class="text-moon-silver/60 hover:text-ember-orange transition-colors py-1 inline-block">Series</a></li>
						<li><a href="/blog" class="text-moon-silver/60 hover:text-ember-orange transition-colors py-1 inline-block">Blog</a></li>
						<li><a href="/about" class="text-moon-silver/60 hover:text-ember-orange transition-colors py-1 inline-block">About</a></li>
					</ul>
				</div>

				<!-- Featured Series (dynamically pulled from CMS) -->
				<div>
					<h4 class="font-semibold text-bone-white mb-4">Featured Series</h4>
					<ul class="space-y-3">
						{featuredSeries.map(s => (
							<li><a href={`/series/${s.id}`} class="text-moon-silver/60 hover:text-ember-orange transition-colors py-1 inline-block">{s.data.title}</a></li>
						))}
					</ul>
				</div>
			</div>

			<!-- Footer Bottom -->
			<div class="border-t border-mystic-violet/20 pt-8">
				<div class="flex flex-col md:flex-row justify-between items-center">
					<div class="text-moon-silver/60 text-sm mb-4 md:mb-0">
						&copy; {today.getFullYear()} {authorName}. All rights reserved.
					</div>

					<!-- Privacy Links -->
					<div class="flex flex-wrap gap-4 text-moon-silver/60 text-sm">
						<a href="/privacy-policy"
						   class="hover:text-ember-orange transition-colors">
							Privacy Policy
						</a>
						<span class="text-moon-silver/20">|</span>
						<a href="/cookie-policy"
						   class="hover:text-ember-orange transition-colors">
							Cookie Policy
						</a>
						<span class="text-moon-silver/20">|</span>
						<a href="/contact"
						   class="hover:text-ember-orange transition-colors">
							Contact
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
