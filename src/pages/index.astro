---
import Layout from '../layouts/Layout.astro';
import { SITE_TITLE } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

// Get testimonials for homepage
const allTestimonials = await getCollection('testimonials');
const featuredTestimonials = allTestimonials
	.filter(t => t.data.featured)
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3);

// Get site configuration from CMS
const settingsCollection = await getCollection('settings');
const siteConfig = settingsCollection[0]?.data || {
	tagline: "Paranormal romance with a focus on the weird and wonderful",
	stats: {
		booksPublished: 11,
		pagesRead: "32M+",
		readerRatings: "13K+",
		seriesComplete: 4
	},
	authorBio: "Gwen DeMarco writes paranormal romance novels featuring snarky heroines, grumpy male leads, and the magic of found family.",
	newsletter: {
		leadMagnetTitle: "Join the Supernatural Side",
		leadMagnetDescription: "Get exclusive content, early access to new releases, and behind-the-scenes peeks into the weird and wonderful worlds of urban fantasy.",
		benefits: [
			"Free starter content with bonus material",
			"Early access to new releases",
			"Exclusive character backstories",
			"Behind-the-scenes writing updates"
		]
	}
};

// Get featured series
const allSeries = await getCollection('series');
const featuredSeries = allSeries.filter(s => s.data.featured);

// Get featured books for homepage display
const allBooks = await getCollection('books');
const featuredBooks = allBooks
	.filter(book => book.data.featured)
	.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
	.slice(0, 4);

// Get recent blog posts for homepage
const allPosts = await getCollection('blog');
const recentPosts = allPosts
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);

// Get Sophie and The Odd Ones cover for Start Reading CTA
const sophieBook = allBooks.find(b => b.id === 'sophie-and-the-odd-ones');

// Helper to get series display name
const seriesMap = new Map(allSeries.map(s => [s.id, s.data.title]));
function getSeriesDisplay(seriesSlug: string | undefined): string {
	if (!seriesSlug) return '';
	return seriesMap.get(seriesSlug) || seriesSlug.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
}

// Helper to get book title from slug (bookTitle field stores slug since T070)
const bookTitleMap = new Map(allBooks.map(b => [b.id, b.data.title]));
function getBookTitle(bookSlug: string | undefined): string {
	if (!bookSlug) return '';
	return bookTitleMap.get(bookSlug) || bookSlug.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
}
---

<Layout title={`${SITE_TITLE} | Paranormal Romance Author`}>
	<main id="main-content" class="relative">
		<!-- Hero Section -->
		<section class="relative min-h-screen flex items-center justify-center bg-gradient-night overflow-hidden">
			<!-- Background fog effect - enhanced with multiple layers -->
			<div class="absolute inset-0 bg-gradient-fog opacity-40"></div>
			<div class="absolute inset-0 bg-gradient-to-t from-shadow-black/80 via-shadow-black/20 to-transparent"></div>

			<!-- Animated fog layers - enhanced with multiple drifting layers -->
			<div class="absolute inset-0 overflow-hidden pointer-events-none">
				<!-- Bottom fog layer -->
				<div class="absolute w-full h-64 -bottom-32 bg-gradient-to-t from-midnight-purple/40 to-transparent animate-fog-drift"></div>
				<!-- Middle fog layer - slower, opposite direction -->
				<div class="absolute w-full h-48 bottom-0 bg-gradient-to-t from-mystic-violet/15 to-transparent animate-fog-drift-slow" style="animation-direction: reverse;"></div>
				<!-- Top mist layer -->
				<div class="absolute w-full h-32 top-0 bg-gradient-to-b from-midnight-purple/20 to-transparent animate-fog-drift-slow opacity-60"></div>
			</div>

			<!-- Subtle radial glow at center -->
			<div class="absolute inset-0 bg-radial-glow opacity-30 pointer-events-none"></div>

			<div class="container mx-auto px-4 text-center relative z-10">
				<div class="max-w-4xl mx-auto space-y-8">
					<!-- Author Name & Tagline -->
					<div class="space-y-4">
						<h1 class="text-4xl sm:text-5xl md:text-7xl font-primary font-bold text-bone-white mb-4">
							<span class="bg-gradient-to-r from-mystic-violet via-ember-orange to-mystic-teal bg-clip-text text-transparent">
								Gwen DeMarco
							</span>
						</h1>
						<p class="text-lg sm:text-xl md:text-2xl text-ember-orange font-medium px-2">
							{siteConfig.tagline || "Paranormal romance with a focus on the weird and wonderful"}
						</p>
					</div>

					<!-- Stats -->
					<div class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 md:gap-6">
						<div class="bg-midnight-purple/40 backdrop-blur-sm rounded-lg p-3 sm:p-4 border border-mystic-violet/30 hover:shadow-mystic transition-all duration-300">
							<div class="text-xl sm:text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.booksPublished || 11}</div>
							<div class="text-xs sm:text-sm text-moon-silver/80">Books Published</div>
						</div>
						<div class="bg-midnight-purple/40 backdrop-blur-sm rounded-lg p-3 sm:p-4 border border-mystic-violet/30 hover:shadow-mystic transition-all duration-300">
							<div class="text-xl sm:text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.pagesRead || "32M+"}</div>
							<div class="text-xs sm:text-sm text-moon-silver/80">Pages Read</div>
						</div>
						<div class="bg-midnight-purple/40 backdrop-blur-sm rounded-lg p-3 sm:p-4 border border-mystic-violet/30 hover:shadow-mystic transition-all duration-300">
							<div class="text-xl sm:text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.readerRatings || "13K+"}</div>
							<div class="text-xs sm:text-sm text-moon-silver/80">Reader Ratings</div>
						</div>
						<div class="bg-midnight-purple/40 backdrop-blur-sm rounded-lg p-3 sm:p-4 border border-mystic-violet/30 hover:shadow-mystic transition-all duration-300">
							<div class="text-xl sm:text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.seriesComplete || 4}</div>
							<div class="text-xs sm:text-sm text-moon-silver/80">Series</div>
						</div>
					</div>

					<!-- CTA Buttons -->
					<div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
						<a href="/books" class="btn btn-primary btn-lg px-6 sm:px-8 py-4 text-base sm:text-lg w-full sm:w-auto min-h-[48px]">
							Explore My Books
						</a>
						<a href="/about" class="btn btn-secondary btn-lg px-6 sm:px-8 py-4 text-base sm:text-lg w-full sm:w-auto min-h-[48px]">
							Meet the Author
						</a>
					</div>

					<!-- Author Bio Snippet -->
					<div class="max-w-2xl mx-auto">
						<p class="text-lg text-moon-silver/90 leading-relaxed">
							{siteConfig.authorBio?.split('.').slice(0, 2).join('.') + '.' ||
							"Gwen DeMarco writes paranormal romance novels featuring snarky heroines, grumpy male leads, and the magic of found family."}
						</p>
					</div>
				</div>
			</div>

			<!-- Scroll Indicator -->
			<div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
				<svg class="w-6 h-6 text-ember-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
				</svg>
			</div>
		</section>

		<!-- Featured Books Section -->
		{featuredBooks.length > 0 && (
			<section class="py-16 px-4 bg-bg-secondary">
				<div class="container mx-auto">
					<div class="text-center mb-12">
						<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
							Featured Books
						</h2>
						<p class="text-lg text-fog-gray max-w-2xl mx-auto">
							Start your supernatural adventure with these reader favorites
						</p>
					</div>

					<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
						{featuredBooks.map((book) => (
							<a href={`/books/${book.id}`} class="card card-hover group p-4 flex flex-col h-full">
								<!-- Book cover -->
								<div class="w-full aspect-[2/3] bg-gradient-to-br from-mystic-violet/30 to-midnight-purple rounded-lg mb-4 flex items-center justify-center border border-mystic-violet/30 group-hover:border-ember-orange/50 group-hover:shadow-mystic transition-all duration-300 overflow-hidden relative">
									{book.data.cover ? (
										<img src={book.data.cover} alt={book.data.title} class="w-full h-full object-cover" loading="lazy" />
									) : (
										<div class="text-center text-bone-white/70 px-2">
											<span class="text-4xl block mb-2">ðŸ“–</span>
											<span class="text-xs font-medium line-clamp-2">{book.data.title}</span>
										</div>
									)}
									{/* Hover glow effect */}
									<div class="absolute inset-0 bg-gradient-to-t from-ember-orange/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
								</div>

								<!-- Series badge -->
								{book.data.series && (
									<span class="badge badge-primary mb-2 w-fit text-xs">{getSeriesDisplay(book.data.series)}</span>
								)}

								<!-- Title -->
								<h3 class="font-primary text-lg font-bold text-ember-orange mb-2 group-hover:text-mystic-teal transition-colors line-clamp-2">
									{book.data.title}
								</h3>

								<!-- Description -->
								<p class="text-fog-gray text-sm mb-4 line-clamp-2 flex-grow">
									{book.data.description}
								</p>

								<!-- Rating and price -->
								<div class="flex items-center justify-between mt-auto pt-3 border-t border-mystic-violet/20">
									{book.data.rating && (
										<div class="flex items-center space-x-1">
											<span class="text-ember-orange">â˜…</span>
											<span class="text-moon-silver text-sm">{book.data.rating}</span>
										</div>
									)}
									<div class="flex items-center space-x-2">
										{book.data.isKU && (
											<span class="badge badge-secondary text-xs">KU</span>
										)}
										{book.data.price && (
											<span class="text-mystic-teal font-medium text-sm">{book.data.price}</span>
										)}
									</div>
								</div>
							</a>
						))}
					</div>

					<div class="text-center mt-10">
						<a href="/books" class="btn btn-outline btn-lg px-8 py-4 inline-flex items-center space-x-2">
							<span>View All Books</span>
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
							</svg>
						</a>
					</div>
				</div>
			</section>
		)}

		<!-- Start Reading CTA Section -->
		<section class="py-16 px-4 bg-gradient-to-br from-shadow-black via-midnight-purple/50 to-shadow-black relative overflow-hidden">
			<!-- Background glow effects -->
			<div class="absolute inset-0 bg-radial-glow opacity-20 pointer-events-none"></div>
			<div class="absolute top-0 left-1/4 w-96 h-96 bg-mystic-violet/10 rounded-full blur-3xl"></div>
			<div class="absolute bottom-0 right-1/4 w-96 h-96 bg-ember-orange/10 rounded-full blur-3xl"></div>

			<div class="container mx-auto relative z-10">
				<div class="max-w-5xl mx-auto">
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
						<!-- Book Feature -->
						<div class="flex flex-col items-center lg:items-start">
							<a href="/books/sophie-and-the-odd-ones" class="group relative">
								<!-- Book cover with glow -->
								<div class="w-48 sm:w-56 md:w-64 aspect-[2/3] bg-gradient-to-br from-mystic-violet/40 to-midnight-purple rounded-lg border-2 border-mystic-violet/50 flex items-center justify-center shadow-mystic group-hover:shadow-ember group-hover:border-ember-orange/70 transition-all duration-500 overflow-hidden">
									{sophieBook?.data.cover ? (
										<img src={sophieBook.data.cover} alt="Sophie and The Odd Ones" class="w-full h-full object-cover" loading="lazy" />
									) : (
										<div class="text-center text-bone-white/80 px-4">
											<span class="text-6xl block mb-3">ðŸ“–</span>
											<span class="text-sm font-medium">Sophie and The Odd Ones</span>
										</div>
									)}
									<!-- Hover overlay -->
									<div class="absolute inset-0 bg-gradient-to-t from-ember-orange/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
								</div>
								<!-- Floating badge -->
								<div class="absolute -top-3 -right-3 bg-ember-orange text-bone-white text-xs font-bold px-3 py-1 rounded-full shadow-ember animate-pulse">
									Start Here!
								</div>
							</a>

							<!-- Series badge -->
							<div class="mt-4 flex items-center space-x-2">
								<span class="badge badge-primary">Sophie Feegle Series</span>
								<span class="badge badge-outline">Book 1</span>
							</div>
						</div>

						<!-- CTA Content -->
						<div class="text-center lg:text-left space-y-6">
							<div>
								<span class="text-ember-orange text-sm font-semibold uppercase tracking-wider">New to Gwen DeMarco?</span>
								<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mt-2">
									Start Your Supernatural Journey
								</h2>
							</div>

							<!-- Hook/Teaser -->
							<div class="bg-midnight-purple/40 border-l-4 border-ember-orange rounded-r-lg p-4 backdrop-blur-sm">
								<p class="text-moon-silver italic text-lg leading-relaxed">
									"Sophie Feegle thought she had her life figured out. A steady job at the San Francisco City Morgue, a comfortable routine, and absolutely no complications. Then the bodies started getting weird..."
								</p>
							</div>

							<p class="text-fog-gray">
								Dive into the world of shifters, ogres, and vampires with the book that started it all. Meet Sophieâ€”a snarky heroine who's about to discover San Francisco's supernatural underbelly is a lot more literal than she ever imagined.
							</p>

							<!-- CTA Buttons -->
							<div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
								<a
									href="https://www.amazon.com/Sophie-Odd-Ones-Gwen-DeMarco-ebook/dp/B08CHKH9SY"
									target="_blank"
									rel="noopener noreferrer"
									class="btn btn-primary btn-lg px-8 py-4 inline-flex items-center justify-center space-x-2"
								>
									<span>Read Free Sample</span>
									<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
									</svg>
								</a>
								<a href="/series" class="btn btn-outline btn-lg px-8 py-4 inline-flex items-center justify-center space-x-2">
									<span>Explore Series</span>
									<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
									</svg>
								</a>
							</div>

							<!-- Social proof -->
							<div class="flex items-center justify-center lg:justify-start space-x-4 text-sm">
								<div class="flex items-center space-x-1">
									<span class="text-ember-orange">â˜…â˜…â˜…â˜…â˜†</span>
									<span class="text-fog-gray">4.3 rating</span>
								</div>
								<span class="text-mystic-violet/50">|</span>
								<span class="text-fog-gray">245+ reviews</span>
								<span class="text-mystic-violet/50">|</span>
								<span class="text-mystic-teal">Free on Kindle Unlimited</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Featured Series Section -->
		<section class="py-16 px-4 bg-dark-surface">
			<div class="container mx-auto">
				<div class="text-center mb-12">
					<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
						Featured Series
					</h2>
					<p class="text-lg text-fog-gray max-w-2xl mx-auto">
						Dive into supernatural worlds filled with snarky heroines, grumpy heroes, and the magic of found family
					</p>
				</div>

				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto">
					<!-- Sophie Feegle -->
					<a href="/series/sophie-feegle" class="card card-hover p-5 sm:p-6 text-center group">
						<div class="w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-4 bg-gradient-to-br from-mystic-violet to-ember-orange rounded-full flex items-center justify-center shadow-mystic group-hover:shadow-ember transition-shadow duration-300">
							<span class="text-xl sm:text-2xl">&#128123;</span>
						</div>
						<h3 class="font-primary text-lg sm:text-xl font-bold text-ember-orange mb-2 group-hover:text-mystic-teal transition-colors">Sophie Feegle</h3>
						<p class="text-fog-gray text-sm sm:text-base mb-4">Urban fantasy set in San Francisco's supernatural underbelly. Shifters, ogres, and one very determined morgue assistant.</p>
						<span class="badge badge-primary">5 Books</span>
					</a>

					<!-- Kingdom of Erishum -->
					<a href="/series/kingdom-of-erishum" class="card card-hover p-5 sm:p-6 text-center group">
						<div class="w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-4 bg-gradient-to-br from-mystic-teal to-mystic-violet rounded-full flex items-center justify-center shadow-teal group-hover:shadow-mystic transition-shadow duration-300">
							<span class="text-xl sm:text-2xl">&#128081;</span>
						</div>
						<h3 class="font-primary text-lg sm:text-xl font-bold text-mystic-teal mb-2 group-hover:text-ember-orange transition-colors">Kingdom of Erishum</h3>
						<p class="text-fog-gray text-sm sm:text-base mb-4">Epic fantasy trilogy with street-level heroism, ancient creatures, and impossible odds.</p>
						<span class="badge badge-secondary">Trilogy</span>
					</a>

					<!-- Auras & Embers -->
					<a href="/series/auras-and-embers" class="card card-hover p-5 sm:p-6 text-center group sm:col-span-2 lg:col-span-1">
						<div class="w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-4 bg-gradient-to-br from-ember-orange to-mystic-violet rounded-full flex items-center justify-center shadow-ember group-hover:shadow-mystic transition-shadow duration-300">
							<span class="text-xl sm:text-2xl">&#128293;</span>
						</div>
						<h3 class="font-primary text-lg sm:text-xl font-bold text-ember-orange mb-2 group-hover:text-mystic-teal transition-colors">Auras & Embers</h3>
						<p class="text-fog-gray text-sm sm:text-base mb-4">Urban fantasy with auramancers, phoenix shifters, and dangerous magic that demands a price.</p>
						<span class="badge badge-outline">Ongoing</span>
					</a>
				</div>

				<div class="text-center mt-12">
					<a href="/series" class="btn btn-outline btn-lg px-8 py-4">
						View All Series
					</a>
				</div>
			</div>
		</section>

		<!-- Why Readers Love Section -->
		<section class="py-16 px-4 bg-bg-secondary">
			<div class="container mx-auto">
				<div class="text-center mb-12">
					<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
						Why Readers Love My Books
					</h2>
					<p class="text-lg text-fog-gray max-w-2xl mx-auto">
						Discover what makes these paranormal worlds different
					</p>
				</div>

				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto">
					<div class="card p-6 sm:p-8 text-center hover:shadow-mystic transition-all duration-300">
						<div class="w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-4 bg-gradient-to-br from-mystic-violet to-ember-orange rounded-full flex items-center justify-center">
							<svg class="w-6 h-6 sm:w-7 sm:h-7 text-bone-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
							</svg>
						</div>
						<h3 class="text-lg sm:text-xl font-bold text-ember-orange mb-4 font-primary">Snarky Heroines</h3>
						<p class="text-fog-gray text-sm sm:text-base">
							My heroines have attitude, opinions, and aren't afraid to use them. They solve problems with wit and determination, not damsel-in-distress moments.
						</p>
					</div>

					<div class="card p-6 sm:p-8 text-center hover:shadow-teal transition-all duration-300">
						<div class="w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-4 bg-gradient-to-br from-mystic-teal to-mystic-violet rounded-full flex items-center justify-center">
							<svg class="w-6 h-6 sm:w-7 sm:h-7 text-bone-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" />
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z" />
							</svg>
						</div>
						<h3 class="text-lg sm:text-xl font-bold text-mystic-teal mb-4 font-primary">Found Family</h3>
						<p class="text-fog-gray text-sm sm:text-base">
							Blood doesn't make a familyâ€”loyalty does. My books celebrate the bonds we choose and the people who become home.
						</p>
					</div>

					<div class="card p-6 sm:p-8 text-center hover:shadow-ember transition-all duration-300 sm:col-span-2 lg:col-span-1">
						<div class="w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-4 bg-gradient-to-br from-ember-orange to-mystic-violet rounded-full flex items-center justify-center">
							<svg class="w-6 h-6 sm:w-7 sm:h-7 text-bone-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
							</svg>
						</div>
						<h3 class="text-lg sm:text-xl font-bold text-ember-orange mb-4 font-primary">Grumpy-Sunshine Romance</h3>
						<p class="text-fog-gray text-sm sm:text-base">
							There's nothing like a grumpy hero melting for the right person. Add some supernatural tension and you've got the perfect slow burn.
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Reader Testimonials Section -->
		{featuredTestimonials.length > 0 && (
			<section class="py-16 px-4 bg-dark-surface">
				<div class="container mx-auto">
					<div class="text-center mb-12">
						<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
							What Readers Are Saying
						</h2>
						<p class="text-lg text-fog-gray max-w-2xl mx-auto">
							Reviews from the supernatural reading community
						</p>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
						{featuredTestimonials.map((testimonial) => (
							<div class="card p-6 relative hover:shadow-mystic transition-all duration-300">
								{/* Decorative quote mark */}
								<div class="absolute top-4 left-4 text-5xl text-mystic-violet/30 font-serif leading-none">"</div>

								{/* Star rating */}
								<div class="flex items-center mb-4 pt-4">
									<div class="flex text-ember-orange">
										{Array.from({ length: testimonial.data.rating }, (_, i) => (
											<svg key={i} class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
												<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
											</svg>
										))}
									</div>
									{testimonial.data.verified && (
										<span class="ml-2 text-xs bg-mystic-teal/20 text-mystic-teal px-2 py-1 rounded">
											Verified
										</span>
									)}
								</div>

								{/* Quote */}
								<blockquote class="text-moon-silver mb-4 italic leading-relaxed">
									"{testimonial.data.quote}"
								</blockquote>

								{/* Attribution */}
								<div class="mt-auto">
									<div class="text-sm font-medium text-ember-orange">
										â€” {testimonial.data.reviewerName}
									</div>
									{testimonial.data.bookTitle && (
										<div class="text-xs text-fog-gray mt-1">
											on <a href={`/books/${testimonial.data.bookTitle}`} class="text-mystic-teal hover:text-ember-orange transition-colors duration-200 underline decoration-mystic-teal/40 hover:decoration-ember-orange/60">{getBookTitle(testimonial.data.bookTitle)}</a>
											<span class="capitalize ml-1">({testimonial.data.reviewerPlatform})</span>
										</div>
									)}
								</div>
							</div>
						))}
					</div>
				</div>
			</section>
		)}

		<!-- Readers Love Social Proof Section -->
		<section class="py-16 px-4 bg-gradient-to-br from-midnight-purple/40 via-shadow-black to-midnight-purple/40 relative overflow-hidden">
			<!-- Background effects -->
			<div class="absolute inset-0 bg-radial-glow opacity-10 pointer-events-none"></div>

			<div class="container mx-auto relative z-10">
				<div class="text-center mb-12">
					<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
						Readers Love These Books
					</h2>
					<p class="text-lg text-fog-gray max-w-2xl mx-auto">
						Join thousands of readers who've discovered the weird and wonderful
					</p>
				</div>

				<div class="max-w-5xl mx-auto">
					<!-- Platform Stats Row -->
					<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
						<!-- Amazon Stats Card -->
						<div class="card p-6 bg-midnight-purple/50 border-mystic-violet/30 hover:shadow-mystic transition-all duration-300">
							<div class="flex items-center justify-between mb-4">
								<div class="flex items-center space-x-3">
									<div class="w-12 h-12 rounded-full overflow-hidden flex items-center justify-center">
										<img src="/images/amazon-logo.svg" alt="Amazon" class="w-12 h-12" />
									</div>
									<div>
										<div class="text-lg font-bold text-bone-white">Amazon</div>
										<div class="text-xs text-fog-gray">Kindle & Paperback</div>
									</div>
								</div>
								<a href={siteConfig.socialLinks?.amazon || "#"} target="_blank" rel="noopener noreferrer" class="text-mystic-teal hover:text-ember-orange transition-colors text-sm">
									View Store â†’
								</a>
							</div>
							<div class="flex items-center justify-between">
								<div class="flex items-center space-x-2">
									<span class="text-3xl font-bold text-ember-orange">{siteConfig.stats?.amazonRating || "4.6"}</span>
									<div class="flex text-ember-orange">
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5 text-fog-gray" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
									</div>
								</div>
								<div class="text-right">
									<div class="text-xl font-bold text-moon-silver">{siteConfig.stats?.amazonReviewCount || "13K+"}</div>
									<div class="text-xs text-fog-gray">reviews</div>
								</div>
							</div>
						</div>

						<!-- Goodreads Stats Card -->
						<div class="card p-6 bg-midnight-purple/50 border-mystic-violet/30 hover:shadow-teal transition-all duration-300">
							<div class="flex items-center justify-between mb-4">
								<div class="flex items-center space-x-3">
									<div class="w-12 h-12 rounded-full overflow-hidden flex items-center justify-center">
									<img src="/images/goodreads-logo.svg" alt="Goodreads" class="w-12 h-12" />
								</div>
									<div>
										<div class="text-lg font-bold text-bone-white">Goodreads</div>
										<div class="text-xs text-fog-gray">Reader Community</div>
									</div>
								</div>
								<a href={siteConfig.socialLinks?.goodreads || "#"} target="_blank" rel="noopener noreferrer" class="text-mystic-teal hover:text-ember-orange transition-colors text-sm">
									Follow â†’
								</a>
							</div>
							<div class="flex items-center justify-between">
								<div class="flex items-center space-x-2">
									<span class="text-3xl font-bold text-mystic-teal">{siteConfig.stats?.goodreadsRating || "4.5"}</span>
									<div class="flex text-mystic-teal">
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
										<svg class="w-5 h-5 text-fog-gray" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
									</div>
								</div>
								<div class="text-right">
									<div class="text-xl font-bold text-moon-silver">{siteConfig.stats?.goodreadsReviewCount || "9K+"}</div>
									<div class="text-xs text-fog-gray">ratings</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Aggregate Stats Row -->
					<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
						<div class="text-center p-4 bg-midnight-purple/30 rounded-lg border border-mystic-violet/20">
							<div class="text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.totalReviews || "500+"}</div>
							<div class="text-sm text-fog-gray">Total Reviews</div>
						</div>
						<div class="text-center p-4 bg-midnight-purple/30 rounded-lg border border-mystic-violet/20">
							<div class="text-2xl md:text-3xl font-bold text-mystic-teal">{siteConfig.stats?.averageRating || "4.4"}</div>
							<div class="text-sm text-fog-gray">Average Rating</div>
						</div>
						<div class="text-center p-4 bg-midnight-purple/30 rounded-lg border border-mystic-violet/20">
							<div class="text-2xl md:text-3xl font-bold text-ember-orange">{siteConfig.stats?.booksPublished || 11}</div>
							<div class="text-sm text-fog-gray">Books Published</div>
						</div>
						<div class="text-center p-4 bg-midnight-purple/30 rounded-lg border border-mystic-violet/20">
							<div class="text-2xl md:text-3xl font-bold text-mystic-teal">{siteConfig.stats?.seriesComplete || 4}</div>
							<div class="text-sm text-fog-gray">Series</div>
						</div>
					</div>

					<!-- CTA -->
					<div class="text-center mt-10">
						<p class="text-moon-silver mb-4">Ready to join the community?</p>
						<div class="flex flex-col sm:flex-row gap-4 justify-center">
							<a href="/books" class="btn btn-primary btn-lg px-8 py-4">
								Browse All Books
							</a>
							<a href="/series" class="btn btn-outline btn-lg px-8 py-4">
								Explore Series
							</a>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Recent Blog Posts Section -->
		{recentPosts.length > 0 && (
			<section class="py-16 px-4 bg-dark-surface">
				<div class="container mx-auto">
					<div class="text-center mb-12">
						<h2 class="font-primary text-3xl md:text-4xl font-bold text-bone-white mb-4">
							Latest from the Blog
						</h2>
						<p class="text-lg text-fog-gray max-w-2xl mx-auto">
							Writing updates, book launches, and behind-the-scenes peeks into the worlds I create
						</p>
					</div>

					<div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
						{recentPosts.map((post, index) => (
							<a
								href={`/blog/${post.id}/`}
								class={`card card-hover p-6 group flex flex-col h-full ${index === 0 ? 'md:col-span-1' : ''}`}
							>
								{/* Category badge */}
								{post.data.category && (
									<span class="badge badge-series text-xs mb-3 w-fit">
										{post.data.category.toString().split('-').map(word =>
											word.charAt(0).toUpperCase() + word.slice(1)
										).join(' ')}
									</span>
								)}

								{/* Title */}
								<h3 class="font-primary text-lg font-bold text-bone-white group-hover:text-ember-orange transition-colors mb-3 line-clamp-2">
									{post.data.title}
								</h3>

								{/* Description/Excerpt */}
								{post.data.description && (
									<p class="text-fog-gray text-sm mb-4 line-clamp-3 flex-grow">
										{post.data.description}
									</p>
								)}

								{/* Date and reading time */}
								<div class="flex items-center justify-between text-sm mt-auto pt-4 border-t border-mystic-violet/20">
									<span class="text-mystic-teal">
										<FormattedDate date={post.data.pubDate} />
									</span>
									{post.data.readingTime && (
										<span class="text-fog-gray">
											{post.data.readingTime}
										</span>
									)}
								</div>
							</a>
						))}
					</div>

					<div class="text-center mt-10">
						<a href="/blog" class="btn btn-outline btn-lg px-8 py-4 inline-flex items-center space-x-2">
							<span>View All Posts</span>
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
							</svg>
						</a>
					</div>
				</div>
			</section>
		)}

		<!-- Newsletter Section -->
		<section class="py-12 sm:py-16 px-4 bg-gradient-to-r from-midnight-purple via-shadow-black to-midnight-purple">
			<div class="container mx-auto text-center">
				<div class="max-w-3xl mx-auto">
					<h2 class="font-primary text-2xl sm:text-3xl md:text-4xl font-bold text-bone-white mb-4">
						{siteConfig.newsletter?.leadMagnetTitle || "Join the Supernatural Side"}
					</h2>
					<p class="text-base sm:text-lg md:text-xl mb-6 sm:mb-8 text-moon-silver/90 px-2">
						{siteConfig.newsletter?.leadMagnetDescription || "Get exclusive content, early access to new releases, and behind-the-scenes peeks into the weird and wonderful worlds of urban fantasy."}
					</p>

					{siteConfig.newsletter?.benefits && (
						<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 text-left max-w-2xl mx-auto px-2">
							{siteConfig.newsletter.benefits.slice(0, 4).map((benefit: string) => (
								<div class="flex items-start space-x-3">
									<div class="w-5 h-5 bg-ember-orange rounded-full flex items-center justify-center flex-shrink-0 mt-0.5">
										<svg class="w-3 h-3 text-bone-white" fill="currentColor" viewBox="0 0 20 20">
											<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
										</svg>
									</div>
									<span class="text-moon-silver text-sm sm:text-base">{benefit}</span>
								</div>
							))}
						</div>
					)}

					<button type="button" class="btn btn-primary btn-lg px-6 sm:px-8 py-4 text-base sm:text-lg min-h-[48px] newsletter-trigger">
						Subscribe Now for Free Ebook
					</button>
				</div>
			</div>
		</section>
	</main>
</Layout>
