<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager - Gwen DeMarco</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  </head>
  <body>
    <!-- Include the script that builds the page and powers Decap CMS -->
    <script src="https://unpkg.com/decap-cms@^3.8.2/dist/decap-cms.js"></script>
    <script>
      // Custom preview templates for better content editing experience
      CMS.registerPreviewTemplate('blog', createPreviewTemplate('blog'));
      CMS.registerPreviewTemplate('books', createPreviewTemplate('books'));
      CMS.registerPreviewTemplate('series', createPreviewTemplate('series'));

      function createPreviewTemplate(collection) {
        return ({ entry, widgetFor, widgetsFor }) => {
          const data = entry.get('data').toJS();

          if (collection === 'books') {
            return `
              <div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: system-ui, sans-serif; background: #0a0a0f; color: #e2e8f0;">
                <div style="display: grid; grid-template-columns: 200px 1fr; gap: 20px; margin-bottom: 20px;">
                  <div>
                    <img src="${data.cover}" alt="${data.title}" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 20px rgba(107, 70, 193, 0.3);" />
                  </div>
                  <div>
                    <h1 style="margin: 0 0 8px 0; color: #f8fafc; font-size: 24px;">${data.title}</h1>
                    <p style="margin: 0 0 12px 0; color: #94a3b8; font-size: 16px;">by ${data.author}</p>
                    ${data.series ? `<p style="margin: 0 0 12px 0; color: #6b46c1; font-weight: 600;">${data.series} ${data.seriesOrder ? `#${data.seriesOrder}` : ''}</p>` : ''}
                    <div style="display: flex; gap: 8px; margin-bottom: 12px;">
                      ${data.species ? data.species.map(species => `<span style="background: rgba(107, 70, 193, 0.2); color: #6b46c1; padding: 4px 8px; border-radius: 16px; font-size: 12px; text-transform: capitalize;">${species}</span>`).join('') : ''}
                    </div>
                    <p style="margin: 0; color: #e2e8f0; line-height: 1.6;">${data.description}</p>
                  </div>
                </div>
                <div style="color: #e2e8f0;">
                  ${widgetFor('body')}
                </div>
              </div>
            `;
          }

          if (collection === 'series') {
            return `
              <div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: system-ui, sans-serif; background: #0a0a0f; color: #e2e8f0;">
                <h1 style="margin: 0 0 12px 0; color: #f8fafc; font-size: 32px;">${data.title}</h1>
                <p style="margin: 0 0 20px 0; color: #94a3b8; font-size: 18px;">${data.description}</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px;">
                  <div style="background: #2d1b4e; padding: 16px; border-radius: 8px;">
                    <strong style="color: #6b46c1;">Status:</strong> ${data.completionStatus}
                  </div>
                  <div style="background: #2d1b4e; padding: 16px; border-radius: 8px;">
                    <strong style="color: #6b46c1;">Books:</strong> ${data.bookCount}
                  </div>
                  <div style="background: #2d1b4e; padding: 16px; border-radius: 8px;">
                    <strong style="color: #6b46c1;">Rating:</strong> ${data.overallRating}/5
                  </div>
                </div>
                <div style="color: #e2e8f0;">
                  ${widgetFor('body')}
                </div>
              </div>
            `;
          }

          // Default blog template
          return `
            <div style="max-width: 800px; margin: 0 auto; padding: 20px; font-family: system-ui, sans-serif; background: #0a0a0f; color: #e2e8f0;">
              <h1 style="margin: 0 0 12px 0; color: #f8fafc; font-size: 32px;">${data.title}</h1>
              <p style="margin: 0 0 20px 0; color: #94a3b8; font-size: 18px;">${data.description}</p>
              <div style="color: #e2e8f0; line-height: 1.6;">
                ${widgetFor('body')}
              </div>
            </div>
          `;
        };
      }
    </script>
  </body>
</html>
